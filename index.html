<!doctype html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ewidencja Pojazdów - Pro</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

<style>
body {
  margin: 0;
  min-height: 100vh;
  background: linear-gradient(135deg, #1f1f1f, #3a3a3a);
  position: relative;
  overflow-x: hidden;
}

body::after {
  content: "";
  position: fixed;
  bottom: -80px;
  left: 50%;
  transform: translateX(-50%);
  width: 1400px;
  height: 500px;
  background-repeat: no-repeat;
  background-position: center bottom;
  background-size: contain;
  opacity: 0.05;
  pointer-events: none;
  background-image: url("data:image/svg+xml;utf8,\
  <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 300'>\
  <path fill='white' d='M100 200 L150 170 Q200 120 300 120 L500 120 Q600 120 650 170 L700 200 L700 220 L650 220 Q640 260 600 260 Q560 260 550 220 L250 220 Q240 260 200 260 Q160 260 150 220 L100 220 Z'/>\
  <circle cx='200' cy='230' r='25' fill='white'/>\
  <circle cx='600' cy='230' r='25' fill='white'/>\
  </svg>");
}

.main-card {
  background: rgba(255,255,255,0.97);
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
}

h2 {
  font-weight: 600;
  color: #222;
}

.btn {
  border-radius: 30px;
  padding: 8px 18px;
}

.table-hover tbody tr:hover {
  background-color: #eef4ff;
  transition: 0.2s;
}

#successToast {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1060;
  display: none;
  border-radius: 15px;
}
</style>
</head>

<body>

<div id="successToast" class="alert alert-success alert-dismissible fade show" role="alert">
<strong>✔ Sukces!</strong> Operacja wykonana pomyślnie.
<button type="button" class="btn-close" onclick="document.getElementById('successToast').style.display='none'"></button>
</div>

<div class="container py-5">
<div class="main-card">

<div class="d-flex justify-content-between align-items-center mb-4">
<h2>
<i class="bi bi-car-front-fill text-primary me-2"></i>
Ewidencja Pojazdów
</h2>

<button type="button" class="btn btn-primary shadow" data-bs-toggle="modal" data-bs-target="#modalPojazd">
<i class="bi bi-plus-lg me-1"></i> Dodaj pojazd
</button>
</div>

<table class="table table-hover align-middle">
<thead class="table-light">
<tr>
<th>Nr Rejestracyjny</th>
<th>Marka</th>
<th>Model</th>
<th>Rok</th>
<th class="text-center">Akcje</th>
</tr>
</thead>
<tbody id="tabelaBody">
<tr>
<td>KR 12345</td>
<td>Toyota</td>
<td>Corolla</td>
<td>2020</td>
<td class="text-center">
<button class="btn btn-sm btn-outline-danger" onclick="przygotujUsuniecie(this)">
<i class="bi bi-trash"></i>
</button>
</td>
</tr>
</tbody>
</table>

</div>
</div>

<div class="modal fade" id="modalPojazd" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content rounded-4">
<div class="modal-header">
<h5 class="modal-title">Dodaj Nowy Pojazd</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<form id="formPojazd" class="needs-validation" novalidate>

<div class="mb-3">
<label class="form-label">Nr rejestracyjny</label>
<input type="text" class="form-control" id="nrRej" required />
</div>

<div class="mb-3">
<label class="form-label">Marka</label>
<input type="text" class="form-control" id="marka" required />
</div>

<div class="mb-3">
<label class="form-label">Model</label>
<input type="text" class="form-control" id="model" required />
</div>

<div class="mb-3">
<label class="form-label">Rok produkcji</label>
<input type="number" class="form-control" id="rok" min="1900" max="2026" required />
</div>

<div class="modal-footer px-0 pb-0">
<button type="button" class="btn btn-light" data-bs-dismiss="modal">Anuluj</button>
<button type="submit" class="btn btn-success">Zapisz</button>
</div>

</form>
</div>
</div>
</div>
</div>

<div class="modal fade" id="modalUsun" tabindex="-1">
<div class="modal-dialog modal-sm">
<div class="modal-content rounded-4">
<div class="modal-body text-center py-4">
<h5>Na pewno usunąć?</h5>
<p class="text-muted">Tej operacji nie można cofnąć.</p>
<div class="d-flex justify-content-center gap-2 mt-3">
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Nie</button>
<button type="button" class="btn btn-danger" id="btnPotwierdzUsun">Tak, usuń</button>
</div>
</div>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
let wierszDoUsuniecia = null;

function pokazAlert() {
const alert = document.getElementById("successToast");
alert.style.display = "block";
setTimeout(() => alert.style.display = "none", 3000);
}

formPojazd.addEventListener("submit", function (event) {
event.preventDefault();
if (this.checkValidity()) {

const row = tabelaBody.insertRow();
row.innerHTML = `
<td>${nrRej.value}</td>
<td>${marka.value}</td>
<td>${model.value}</td>
<td>${rok.value}</td>
<td class="text-center">
<button class="btn btn-sm btn-outline-danger" onclick="przygotujUsuniecie(this)">
<i class="bi bi-trash"></i>
</button>
</td>
`;

bootstrap.Modal.getInstance(modalPojazd).hide();
this.reset();
this.classList.remove("was-validated");
pokazAlert();
} else {
this.classList.add("was-validated");
}
});

function przygotujUsuniecie(btn) {
wierszDoUsuniecia = btn.closest("tr");
new bootstrap.Modal(modalUsun).show();
}

btnPotwierdzUsun.addEventListener("click", function () {
if (wierszDoUsuniecia) {
wierszDoUsuniecia.remove();
wierszDoUsuniecia = null;
bootstrap.Modal.getInstance(modalUsun).hide();
pokazAlert();
}
});
</script>

</body>
</html>
